<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.61 [en] (X11; I; Linux 2.2.12-20 i686) [Netscape]">
   <title>Gegl Tasks</title>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000FF" vlink="#840084" alink="#0000FF">

<div 
CLASS="ARTICLE"
>
<div 
CLASS="TITLEPAGE"
>
<div CLASS="TITLE"><a NAME="Current Tasks"></a><b><font size=+2>Current
Tasks</font></b></div>

<div CLASS="COPYRIGHT">&nbsp;</div>

<div 
CLASS="ABSTRACT"
>This page contains current tasks and notes about
these.&nbsp; Programmers should update this doc in cvs (gegl/docs/gegl.html
and gegl/docs/geglTasks.html) and move current tasks to Finished Tasks
as they finish them. These changes will be propagated to the website. New
entries are at the top.</div>

<table BORDER COLS=1 WIDTH="100%" NOSAVE >
<tr>
<td><a NAME="22 Abstract Syntax Trees for gil"></a>#<b>22 Abstract Syntax
Trees for gil</b>
<br>owner: calvinw@mindspring.com
<br>Suggested: 1/18/2001
<br>Description:&nbsp; We need to extend codegen to create abstract syntax
trees, so that we can do better code generation, type checking and so on.
I have the beginnings of this already, and will create a directory called
gil in toplevel dir (1/18/01). This will eventually replace codegen. So
the new code&nbsp; generator will be just called "gil" and will be something
that can be used to do various tasks that depend on traversing the gil
ast.&nbsp;&nbsp; It will use glib and GNodes for creating the asts from
lex/yacc (like codegen) , and GHashtables for the symbol table. The gil
syntax will mostly stay the same, but we get a more powerful code generator
/language.&nbsp;</td>
</tr>

<tr>
<td><a NAME="21 Gtk-doc setup"></a>#<b>21 Gtk-doc setup</b>
<br>owner: none
<br>Suggested: 1/18/2001
<br>Description:&nbsp; Setup gtk-doc for doing documentation in gegl. This
is DocBook style documentation.&nbsp;</td>
</tr>

<tr>
<td><a NAME="20 Nod class for Directed Acyclic Graphs"></a>#<b>20 Node
class for&nbsp; Directed Acyclic Graphs</b>
<br>Owner: calvinw@mindspring.com
<br>Suggested: 1/18/2001
<br>Description:&nbsp; This class is to hold the information for a node
in a image graph dag and will have lists for the input and output nodes.
This class will be responsible for keeping track of all the graph related
things for Nodes (images, ops). It will have lists for the inputs and outputs
and provide traversals for&nbsp; depth-first, breadth-first, and topologically
sorting. It will keep track of the reference counting (via gtk ref counting
) associated with adding inputs and outputs to nodes, and check graphs
for cycles. This means that it will be possible to set up graphs and pass
them around and delete them by just deleting the root, since ref counting
will take care of finding and destroying nodes automatically.&nbsp;</td>
</tr>

<tr>
<td><a NAME="16 GIL support for accessing channels"></a>#<b>16 GIL support
for accessing channels - Write GIL support for accessing individual color
channels.</b>
<br>Owner: none
<br>Suggested:6/21/2000
<br>Description: gil currently has no way to reference the color channnels
ie pixel.red pixel.green, pixel.blue for rgb. This is needed for Ops that
will write gil code and will want a standard way to refer to the color
channels.&nbsp;</td>
</tr>

<tr>
<td><a NAME="15 Additional Data Storage classes/types for ImageBuffer"></a><b>#15
Additional Data Storage classes/types for ImageBuffer - Write ImageBuffer
subclasses for these?</b>
<br>Owner: none
<br>Suggested:6/21/2000
<br>Description: Gegl will have a standard (as yet undecided) ImageBuffer
storage type. This subclass(?) needs to be written. Right now the basic
ImageBuffer has pointers to each channel of image data and the entire image
data resides in memory.</td>
</tr>

<tr>
<td><a NAME="14 Memory Management classes"></a><b>#14 Memory Management
classes - Write basic memory management classes</b>
<br>Owner: none
<br>Suggested: 6/21/2000
<br>Description: Gegl will need support for a cache to hold buffers as
it computes operations. So we need to support swapping unneeded/unused
buffers to disk, and controlling the cache. This is similar to gimps current
tile scheme/memory management. Not sure if gimp will use this gegl memory
management or its own somehow, but gegl still needs these classes to be
a complete library.</td>
</tr>

<tr>
<td><a NAME="13 Iterator classes"></a><b>#13 Iterator classes - Write basic
Iterator classes</b>
<br>Owner: none
<br>Suggested:6/21/2000
<br>Description:&nbsp;</td>
</tr>

<tr>
<td><a NAME="12 ConvolveOp"></a><b>#12 ConvolveOp - Write basic ConvolveOp
class.&nbsp;</b>
<br>Owner: none
<br>Suggested: 6/21/2000
<br>Description: The ConvolveOp classes can be written once AreaOps are
done. This will involve writing details of handling the kernels and computations
from these (maybe need way of passing generic kernels).&nbsp;</td>
</tr>

<tr>
<td><a NAME="11 GIL support for AreaOp"></a><b>#11 GIL support for AreaOp
- Extend GIL to handle AreaOps.&nbsp;</b>
<br>Owner: none
<br>Suggested: 6/21/2000
<br>Description: gil will need to understand how to get rowstrides and
access pixels. This involves making sure gil can interpret dY calls.
<br>1/18/2001. This depends on #22, since gil will replace codegen.</td>
</tr>

<tr>
<td><a NAME="10 AreaOp - Write basic AreaOp class."></a><b>#10 AreaOp -
Write basic AreaOp class.&nbsp;</b>
<br>Owner: none
<br>Suggested: 6/21/2000
<br>Description: This abstract class is the next basic class needed to
test the gil for these operations. This class will have to decide navigate
the image based on the storage details of the image (tiled vs non-tiled).
So this is somewhat dependent on #15, #14</td>
</tr>

<tr>
<td><a NAME="9 Roi classes - Write basic Roi class."></a><b>#9 Roi classes
- Write basic Roi class.</b>
<br>Owner: none
<br>Suggested: 6/21/2000
<br>Description: See the ImageVision and JAI descriptions of these classes
for some idea of how to make these classes work.
<br>8/6/2000 calvinw@mindspring.com - This is somewhat related to #17 below.&nbsp;</td>
</tr>

<tr>
<td><a NAME="8 Multi-threading support"></a><b>#8 Multi-threading support
- Provide basics of multi-threading for gegl.&nbsp;</b>
<br>Owner: none
<br>Suggested: 6/21/2000
<br>Description:&nbsp;</td>
</tr>
</table>

<p>
<hr WIDTH="100%">
<div CLASS="TITLE"><a NAME="Finished Tasks"></a><b><font size=+2>Finished
Tasks</font></b></div>

<div CLASS="TITLE">Tasks should be moved here with a completion date when
removed from Current tasks list. The are listed with the most recently
finished task listed first.</div>

<table BORDER COLS=1 WIDTH="100%" NOSAVE >
<tr>
<td><a NAME="4 Preprocessor for codegen"></a><b>#4 Preprocessor for codegen
- Need preprocessor that finds gil program and runs codegen with them.</b>
<br>Owner: none
<br>Suggested: 6/21/2000
<br>Finished: 1/18/2001
<br>Description:&nbsp;
<br>1/18/2001 calvinw@mindspring.com- This is really part of #22 now, so
I removed this for now, till the gil asts (#22) task is further along.</td>
</tr>

<tr>
<td><a NAME="6 copy_pixels, get_pixels"></a><b>#6 copy_pixels, get_pixels
- Implement these for ImageBuffer and Op classes.</b>
<br>Owner: caro@rhythm.com
<br>Suggested: 6/21/2000
<br>Finished: 1/18/2001
<br>Description: Some of these routines need to be finished. In particular
the Op classes should return an error on copy_pixels since they are not
writable and copy_pixels is supposed to copy from a passed Image to the
Image represented by this (or self in GOB-speak)
<p>&nbsp;1/18/2000 calvinw@mindspring.com - Op classes dont actually have
copy_pixels. There is only the version in ImageBuffer needed so this isnt
a problem. There is a CopyOp, which is the Op version of a copy. copy_pixels
with arguments that are ImageBuffers is just a convenience routine which
sets up a CopyOp, so this is not an issue. get_pixels for the ImageBuffer
is done as well.&nbsp;</td>
</tr>

<tr>
<td><a NAME="19 Domain of definition and roi regions for Image chains"></a>#<b>19
Domain of definition and roi regions for Image chains- each Op must calculate/set
these.</b>
<br>Owner: calvinw@mindspring.com
<br>Suggested: 8/6/2000
<br>Finished: 11/2000
<br>Description:&nbsp; The roi region is passed to the root node of the
tree, and passed up the tree to in the direction of the leaves. (the inputs).
Each node must calculate the rois to pass to each of its inputs (children)
during a get_pixels call. The domain of definition is passed the other
direction from the leaves to the root.&nbsp; (inherited and synthesized
attributes, in parser/compiler speak) The domain of definition is where
the image is defined (or its alpha is nonzero). Each node determines its
domain of definition from the domain of definitions of its inputs. The
region an op will need to calculate is roughly the intersection of its
roi and domain of definition (at least of point ops, others are slightly
more complicated). See Shantsiz Siggraph94 paper for details.&nbsp;
<p>1/18/2001 calvinw@mindspring.com - These have been finished, initially,
but need to be revisited as we progress. Right now this works with each
node passing the roi&nbsp; (needRect) to use to the input (flyweight pattern
style) . For shared nodes (ones with more than one parent) this is probably
not the best way to do it. We probably should move to something more like
Shantzis uses and compute rects like these in prepasses over the (possibly
topologically sorted) graph. The initial fields and calculations are in
<br>place though.</td>
</tr>

<tr>
<td><a NAME="18 DataConvertOps"></a>#<b>18 DataConvertOps - Write data
conversion ops similar to ColorConvertOps.</b>
<br>Owner: calvinw@mindspring.com
<br>Suggested:6/21/2000
<br>Finished: 8/6/2000&nbsp;
<br>Description: Need DataConvertOps similar to ColorConvertOps.&nbsp;
<p>8/6/2000&nbsp; calvinw@mindspring.com - I removed this task, since it
is actually covered by finished task #1 above. ColorConvertOps cover data
conversions too.</td>
</tr>

<tr>
<td><a NAME="1 Update GeglColorConvertOp"></a><b>#1 Update GeglColorConvertOp
-Make the color color ops use new Image class structure.</b>
<br>Owner: calvinw@mindspring.com
<br>Suggested:6/21/2000
<br>Finished: 8/6/2000
<br>Description: The new ColorConvertOps dont use the new Op class (Op
and ImageBuffer inherit from Image now). ColorConvertOp will be the class
that contains the conversions through the XYZ space if a simple converter
from the the ColorModel class cant be found .&nbsp;
<p>7/3/2000 calvinw@mindspring.com -Also we should have separate DataConvertOps.&nbsp;&nbsp;
I added a task (#18) for this.
<p>8/6/2000 calvinw@mindspring.com - These are finished now, for the most
part. u16_4k model is not done, but rgb_u8, gray_u8, rgb_float, gray_float,
rgb_u16, gray_u16 are finished. Now all color models must implement convert_to_XYZ
and convert_from_XYZ routines (see GeglColorModel). Also each colormodel
is free to implement other conversions from known color models (for example
rgb_u8 implements conversions from rgb_float and gray_u8). These are implemented
as interfaces through the routines gegl_object_add_interface and gegl_object_query_interface.
The GeglColorConvertOp looks for a converter interface when it has to perform
a conversion. If it finds one it calls the routine directly, otherwise
it uses the XYZ conversion routines to do the conversion. This means that
data conversions are taken care of as well. So I removed task #18. GeglColorConvertToRgbOp
and GeglColorConvertToGrayOp are the actual convert ops, and these will
do error checking on the color models eventually. (they dont do checking
yet, that should be put in when color model checking goes in for all ops)</td>
</tr>

<tr>
<td><a NAME="17 Implement gegl-copy-op.gil"></a><b>#17 Implement gegl-copy-op.gil</b>
<br>Owner: caro@rhythm.com
<br>Suggested:6/21/2000
<br>Finished: 07/01/00
<br>Description:&nbsp;</td>
</tr>

<tr>
<td><a NAME="3 Update testgegl, testgeglfilep"></a><b>#3 Update testgegl,
testgeglfile -Make gegl test programs use the new Image class structure.</b>
<br>Owner: caro@rhythm.com
<br>Suggested:6/21/2000
<br>Finished: 06/27/00
<br>Description:</td>
</tr>

<tr>
<td><a NAME="2 Update GeglCopyChanOp"></a><b>#2 Update GeglCopyChanOp -
Make CopyChanOp use the new Image class structure.</b>
<br>Owner: caro@rhythm.com
<br>Suggested:6/21/2000
<br>Finished: 06/27/00
<br>Description: The new CopyChanOp doesnt use the new Op class (Op and
ImageBuffer inherit from Image now).</td>
</tr>

<tr>
<td><a NAME="7 Remove Drawable, GraphicsState classes"></a><b>#7 Remove
Drawable, GraphicsState classes- Remove these classes from the tree.</b>
<br>Owner: caro@rhythm.com
<br>Suggested:6/21/2000
<br>Finished: 06/27/00
<br>Description: Gegl doesnt need these classes at present. This might
be useful in some future version of gegl, but these are higher level classes.</td>
</tr>

<tr>
<td><a NAME="5 Update to latest GOB - Check that the new gob 1.0 and later works for gegl."></a><b>#5
Update to latest GOB - Check that the new gob 1.0 and later works for gegl.&nbsp;</b>
<br>Owner<b>: </b>caro@rhythm.com
<br>Suggested:6/21/2000
<br>Finished: 6/20/2000
<br>Description:</td>
</tr>
</table>
</div>
</div>

</body>
</html>
