<html>
  <head>
    <title>Thing to do for GEGL</title>
    <style type='text/css'>@import url(gegl.css);url(gegl.css);</style>
    <link rel="shortcut icon" href="images/gegl.ico" />
  </head>

  <body>
    <div class='toc'>
      <ul>
          <li><a href='index.html'>GEGL</a></li>
          <li>&nbsp;</li>
        <li><a href='#TODO'>To Do</a></li>
        <li><a href='#GeglColor'>&nbsp;&nbsp;GeglColor</a></li>
        <li><a href='#Buffer'>&nbsp;&nbsp;Buffer</a></li>
        <li><a href='#Evaluation'>&nbsp;&nbsp;Evaluation</a></li>
        <li><a href='#XML'>&nbsp;&nbsp;XML</a></li>
        <li><a href='#Operations'>&nbsp;&nbsp;Operations</a></li>
        <li><a href='#GIL'>&nbsp;&nbsp;&nbsp;&nbsp;GIL</a></li>
        <li><a href='#GIMPPlugIn'>&nbsp;&nbsp;GIMP plug-in</a></li>
      </ul>
   </div>
   <div class='paper'>
     <div class='content'>
       <a name='To do'><h2>To do</h2></a>
       <p>A temporally deficient roadmap for GEGL</p>
     
<a name='Buffer'><h2>Buffer</h2></a>

<p>
Make GeglBuffer be an interface (or a use composition and allow for 
TiledBackend, LinearBackend GimpTileManagerBackend). This will make
integration with legacy GIMP code much easier.
<p>

<ul>
Desired backends:
<li>further evolution of horizon/gegl tile interface with tiled mipmapping</li>
<li>linear buffers</li>
<li>gimp tile manager</li>
<li>GPU memory (for shader code)</li>
<li>verse</li>
<li>krita</li>
<li>image/graphics-magick?</li>
</ul>

<a name='Evaluation'><h2>Evaluation</h2></a>

<a name='XML'><h2>XML</h2></a>

<p>
A file format is gradually evolving, the XML handling might even end up handling
multiple different file formats, at the moment work being done to improve
interoperability through efforts to define an Exhange format for structured
Raster data. <a href='http://create.freedesktop.org/wiki/index.php/OpenRaster'>OpenRaster</a>, <a href='http://pippin.gimp.org/OpenRaster/'>xml sketches</a></p>


<a name='Operations'><h2>Operations</h2></a>

<h3>GIMP plug-in proxy op.</h3>

<p>
A GEGL operation acting as a proxy to legacy gimp plug-ins will drag a lot
of the existing GIMP functionality along. This probably depends on having a
gimp-tile manager backend for gegl buffers working for as smooth as possible
implementation.
</p>

<h3>GEGL operation API freeze</h3>

<p>
At some point the plug-in api for GEGL should be declared stable. It isn't yet
since it doesn't allow registering optimized versions. And there are some confusing naming of the methods needed when implementing.
</p>

<h3>Caching operation</h3>

<p>
Write an operations that maintains a sparse backing buffer the size of the HAVE
rect of the operations. Keeps rendered information, and keeps cached computations
as long as the properties have not changed.</p>

<p>
An initial implementation of this should be designed to work directly on top of
source nodes only. Later a similar approach could be extended to work on subgraphs,
multiple such caches could be used as well, speeding up reevaluations at the expense
of extra tiles used for caching intermediate results.</p>

<p>It could be possible to measure the efficiency of a cache in a particular location,
and decide to retire it,. or move it down in the graph. Based on profiling data of
property changes over time,. it should be possible to discover optimal cache points
in the graph.
</p>

<a name='GIL'><h3>GIL</h3></a>

<p><a href='genericImageLanguage.html'>GIL</a> and <a href='codegen.html'>codegen</a> should probably be resurrected as well, this work would depend on
pixel format negotiation to be in place first.
</p>

<a name='GIMPPlugIn'><h2>GIMP plug-in</h2></a>

<p>A core function, or plug-in, that takes an XML document as parameter. This
document is parsed to a GEGL graph that is then evaluated. The evaluation will
be done on a tile by tile basis and the result will be requested as the BablFormat
<tt>R'G'B'A u8</tt>.
</p>

</div></div>
</body>
</html>
