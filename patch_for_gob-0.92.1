--- main.c.good	Tue Jan 18 20:44:09 2000
+++ main.c	Tue Jan 18 19:36:29 2000
@@ -2034,8 +2034,14 @@
 
 			if(privates>0)
 				out_printf(outh,"\ntypedef struct _%sPrivate %sPrivate;\n",typebase,typebase);
-
-			out_printf(outh,"\ntypedef struct _%s %s;\n",typebase,typebase);
+/* This is where we need a fix --calvin */
+			p = replace_sep(((Class *)class)->otype,'_');
+			g_strup(p);
+			out_printf(outh,"\n#ifndef __%s_F_H__\n"
+					 "#define __%s_F_H__\n",p,p);
+	    		g_free(p);
+			out_printf(outh,"typedef struct _%s %s;\n",typebase,typebase);
+			out_printf(outh,"#endif\n\n");
 			out_printf(outh,"struct _%s {\n\t%s __parent__;\n",
 				   typebase,ptypebase);
 			for(l=c->nodes;l;l=g_list_next(l)) {
